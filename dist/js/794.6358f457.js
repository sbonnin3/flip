"use strict";(self["webpackChunkflip"]=self["webpackChunkflip"]||[]).push([[794],{4794:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"admin-comptes-container"},[t("h1",[e._v("Gestion des Comptes")]),t("div",{staticClass:"search-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"search-bar",attrs:{type:"text",placeholder:"Rechercher dans les identifiants..."},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})]),t("div",{staticClass:"role-filters"},[e._l(e.uniqueRoles,(function(s){return t("label",{key:s},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRoles,expression:"selectedRoles"}],attrs:{type:"checkbox"},domProps:{value:s,checked:Array.isArray(e.selectedRoles)?e._i(e.selectedRoles,s)>-1:e.selectedRoles},on:{change:function(t){var r=e.selectedRoles,i=t.target,o=!!i.checked;if(Array.isArray(r)){var n=s,a=e._i(r,n);i.checked?a<0&&(e.selectedRoles=r.concat([n])):a>-1&&(e.selectedRoles=r.slice(0,a).concat(r.slice(a+1)))}else e.selectedRoles=o}}}),e._v(" "+e._s(s)+" ")])})),t("button",{staticClass:"reset-button",on:{click:e.resetFilters}},[e._v("Réinitialiser")])],2),t("table",[t("thead",[t("tr",[t("th",{on:{click:function(t){return e.sortBy("identifiant")}}},[e._v(" Nom d'utilisateur "),t("span",[e._v(e._s("identifiant"===e.currentSort?e.sortAsc?"↑":"↓":""))])]),t("th",{on:{click:function(t){return e.sortBy("email")}}},[e._v(" Email "),t("span",[e._v(e._s("email"===e.currentSort?e.sortAsc?"↑":"↓":""))])]),t("th",{on:{click:function(t){return e.sortBy("role")}}},[e._v(" Rôle "),t("span",[e._v(e._s("role"===e.currentSort?e.sortAsc?"↑":"↓":""))])]),t("th",[e._v("Actions")])])]),t("tbody",e._l(e.filteredAndSortedComptes,(function(s){return t("tr",{key:s.id,class:e.getRoleClass(s.role)},[t("td",[e._v(e._s(s.identifiant))]),t("td",[e._v(e._s(s.email))]),t("td",[e._v(e._s(s.role))]),t("td",["administrateur"!==s.role?t("button",{on:{click:function(t){return e.deleteCompte(s.id)}}},[e._v(" Supprimer ")]):e._e(),t("button",{on:{click:function(t){return e.openEditModal(s)}}},[e._v("Modifier")])])])})),0)]),e.isEditModalOpen?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal"},[t("h2",[e._v("Modifier le compte")]),t("label",[e._v(" Identifiant : "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editedCompte.identifiant,expression:"editedCompte.identifiant"}],attrs:{type:"text"},domProps:{value:e.editedCompte.identifiant},on:{input:function(t){t.target.composing||e.$set(e.editedCompte,"identifiant",t.target.value)}}})]),t("label",[e._v(" Email : "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editedCompte.email,expression:"editedCompte.email"}],attrs:{type:"email"},domProps:{value:e.editedCompte.email},on:{input:function(t){t.target.composing||e.$set(e.editedCompte,"email",t.target.value)}}})]),t("label",[e._v(" Rôle : "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editedCompte.role,expression:"editedCompte.role"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editedCompte,"role",t.target.multiple?s:s[0])}}},e._l(e.uniqueRoles,(function(s){return t("option",{key:s,domProps:{value:s}},[e._v(" "+e._s(s)+" ")])})),0)]),e.errorMessage?t("p",{staticClass:"error-message"},[e._v(e._s(e.errorMessage))]):e._e(),t("div",{staticClass:"modal-actions"},[t("button",{on:{click:e.saveEditCompte}},[e._v("Enregistrer")]),t("button",{on:{click:e.closeEditModal}},[e._v("Annuler")])])])]):e._e()])},i=[],o=(s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),{name:"AdminComptesView",data(){return{searchQuery:"",currentSort:"identifiant",sortAsc:!0,selectedRoles:[],isEditModalOpen:!1,editedCompte:null,errorMessage:""}},computed:{comptes(){return this.$store.state.comptes},uniqueRoles(){return[...new Set(this.comptes.map((e=>e.role)))]},filteredAndSortedComptes(){let e=this.comptes.filter((e=>{const t=!this.searchQuery||e.identifiant.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedRoles.length||this.selectedRoles.includes(e.role);return t&&s}));return e.sort(((e,t)=>{let s=this.sortAsc?1:-1;return e[this.currentSort]<t[this.currentSort]?-1*s:e[this.currentSort]>t[this.currentSort]?1*s:0}))}},methods:{resetFilters(){this.searchQuery="",this.selectedRoles=[]},sortBy(e){this.currentSort===e?this.sortAsc=!this.sortAsc:(this.currentSort=e,this.sortAsc=!0)},deleteCompte(e){this.$store.commit("REMOVE_COMPTE",e)},openEditModal(e){this.editedCompte={...e},this.errorMessage="",this.isEditModalOpen=!0},closeEditModal(){this.editedCompte=null,this.errorMessage="",this.isEditModalOpen=!1},saveEditCompte(){const e=this.comptes.some((e=>e.identifiant===this.editedCompte.identifiant&&e.id!==this.editedCompte.id));e?this.errorMessage="Cet identifiant existe déjà. Veuillez en choisir un autre.":(this.$store.commit("UPDATE_COMPTE",this.editedCompte),this.closeEditModal())},getRoleClass(e){const t={administrateur:"role-administrateur",restaurateur:"role-restaurateur",vendeur:"role-vendeur",createur:"role-createur",organisateur:"role-organisateur",utilisateur:"role-utilisateur"};return t[e]||""}}}),n=o,a=s(1656),l=(0,a.A)(n,r,i,!1,null,"09acfce1",null),d=l.exports}}]);